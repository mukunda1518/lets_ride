{
    "swagger": "2.0",
    "host": "localhost:8080",
    "basePath": "/api/lets_ride/",
    "info": {
        "version": "1.0.0",
        "title": "Let's Ride",
        "description": "API's for Let's Ride"
    },
    "schemes": [
        "https",
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "securityDefinitions": {
        "oauth": {
            "tokenUrl": "http://auth.ibtspl.com/oauth2/",
            "flow": "password",
            "scopes": {
                "read": "read users",
                "write": "create users",
                "update": "update users",
                "delete": "delete users",
                "superuser": "super user permission"
            },
            "type": "oauth2"
        }
    },
    "definitions": {
        "User": {
            "type": "object",
            "properties": {
                "username": {
                    "type": "string"
                },
                "phone_number": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            },
            "required": [
                "username",
                "phone_number",
                "password"
            ]
        },
        "UserLogin": {
            "type": "object",
            "properties": {
                "phone_number": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            },
            "required": [
                "phone_number",
                "password"
            ]
        },
        "UserProfile": {
            "type": "object",
            "properties": {
                "username": {
                    "type": "string"
                },
                "phone_number": {
                    "type": "string"
                },
                "profile_pic_url": {
                    "type": "string"
                }
            },
            "required": [
                "username",
                "phone_number",
                "profile_pic_url"
            ]
        }
    },
    "parameters": {
        "CreateNewUserRequest": {
            "name": "create_user",
            "description": "To create new user",
            "in": "body",
            "schema": {
                "$ref": "#/definitions/User"
            }
        },
        "LoginUserRequest": {
            "name": "user_login",
            "description": "login user",
            "in": "body",
            "schema": {
                "$ref": "#/definitions/UserLogin"
            }
        },
        "UserPathParameter": {
            "name": "user_id",
            "description": "user id",
            "in": "path",
            "required": true,
            "type": "integer"
        },
        "UserPasswordRequest": {
            "name": "password_update",
            "description": "To update password user",
            "in": "body",
            "schema": {
                "type": "object",
                "properties": {
                    "new_password": {
                        "type": "string"
                    }
                },
                "required": [
                    "new_password"
                ]
            }
        }
    },
    "responses": {
        "LoginUserResponse": {
            "description": "Successfully user created",
            "schema": {
                "type": "object",
                "properties": {
                    "access_token": {
                        "type": "string"
                    },
                    "expires_in": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "refresh_token": {
                        "type": "string"
                    }
                },
                "required": [
                    "access_token",
                    "expires_in",
                    "refresh_token"
                ]
            }
        },
        "UserProfileResponse": {
            "description": "Success",
            "schema": {
                "$ref": "#/definitions/UserProfile"
            }
        },
        "SignUpErrorResponse": {
            "description": "BadRequest",
            "schema": {
                "type": "object",
                "properties": {
                    "response": {
                        "type": "string"
                    },
                    "http_status_code": {
                        "type": "integer",
                        "example": 400
                    },
                    "res_status": {
                        "type": "string",
                        "enum": [
                            "USERNMAE_ALREADY_EXIST",
                            "PHONE_NUMBER_WITH_USER_EXIST"
                        ]
                    }
                }
            }
        },
        "LoginFailureResponse": {
            "description": "Un Authorized",
            "schema": {
                "type": "object",
                "properties": {
                    "response": {
                        "type": "string"
                    },
                    "http_status_code": {
                        "type": "integer",
                        "example": 401
                    },
                    "res_status": {
                        "type": "string",
                        "enum": [
                            "INVALID_USERNAME",
                            "INVALID_PASSWORD"
                        ]
                    }
                }
            }
        }
    },
    "paths": {
        "/sign_up/v1/": {
            "post": {
                "operationId": "sign_up",
                "summary": "Create New user",
                "description": "Creates a new user and return the user id. This api is not idempotent.",
                "parameters": [{
                    "$ref": "#/parameters/CreateNewUserRequest"
                }],
                "responses": {
                    "201": {
                        "$ref": "#/responses/LoginUserResponse"
                    },
                    "400": {
                        "$ref": "#/responses/SignUpErrorResponse"
                    }
                }
            }
        },
        "/login/v1/": {
            "post": {
                "operationId": "login",
                "summary": "user login",
                "description": "user login and return the user id and access token. This api is not idempotent.",
                "parameters": [{
                    "$ref": "#/parameters/LoginUserRequest"
                }],
                "responses": {
                    "200": {
                        "$ref": "#/responses/LoginUserResponse"
                    },
                    "401": {
                        "$ref": "#/responses/LoginFailureResponse"
                    }
                }
            }
        },
        "/user/profile/v1/": {
            "get": {
                "operationId": "user_profile",
                "summary": "user profile",
                "description": "displays user details. This api is not idempotent.",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "parameters": [],
                "responses": {
                    "200": {
                        "$ref": "#/responses/UserProfileResponse"
                    }
                }
            }
        },
        "/update_password/v1/": {
            "put": {
                "operationId": "update_user_password",
                "summary": "update user password",
                "description": "updating user password. This api is not idempotent.",
                "security": [{
                    "oauth": [
                        "write",
                        "read"
                    ]
                }],
                "parameters": [{
                    "$ref": "#/parameters/UserPasswordRequest"
                }],
                "responses": {
                    "201": {
                        "description": "Successfully upadted password"
                    }
                }
            }
        }
    }
}
